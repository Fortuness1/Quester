<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Exemplo de Posição no Array</title>
</head>
<body>
    <form>
        <input type="text" name="useremail" id="email" placeholder="email">
        <input type="text" name="password" id="senha" placeholder="senha">
        <input type="submit" value="Enviar">
    </form>

    <script>
    localStorage.setItem("lastname", "Smith");
        const form = document.querySelector('form');
        form.addEventListener('submit', (e) => {
            e.preventDefault();
            const dataUser = {
                email: form.useremail.value,
                password: form.password.value
            };
            vai();
        });

        const vai = async () => {
            console.log(url);
            try {
                const response = await fetch(
                    'http://localhost:3001/signin',
                {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(dataUser)
                });

                if (!response.ok) {
                    throw new Error(`Response status: ${response.status}`);
                    alert('Erro ao tentar cadastrar usuário');
                }

                const json = await response.json();
                sessionStorage.setItem("quester_idUser", json);
                window.location = "./teste2.html";
                console.log(json);
            } catch (error) {
                console.error(error.message);
                alert('Erro ao tentar cadastrar usuário' + error.message);
            }
        }
    </script>
</body>
</html>
